<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>4.4</version>
    <date>2021-05-14T07:18:42Z</date>
    <groups>
        <group>
            <name>Redis Server Status</name>
        </group>
        <group>
            <name>Templates</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Redis Server Status</template>
            <name>Redis Server Status</name>
            <groups>
                <group>
                    <name>Redis Server Status</name>
                </group>
                <group>
                    <name>Templates</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Redis</name>
                </application>
            </applications>
            <discovery_rules>
                <discovery_rule>
                    <name>Discovery Redis</name>
                    <key>discovery[redis-server]</key>
                    <delay>300s</delay>
                    <lifetime>3600s</lifetime>
                    <item_prototypes>
                        <item_prototype>
                            <name>Redis-$1 aof_enabled</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},aof_enabled]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 blocked_clients</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},blocked_clients]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 cient_recent_max_output_buffer</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},cient_recent_max_output_buffer]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 client_recent_max_input_buffer</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},client_recent_max_input_buffer]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 connected_clients</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},connected_clients]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 expired_keys</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},expired_keys]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 instantaneous_ops_per_sec</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},instantaneous_ops_per_sec]</key>
                            <delay>0</delay>
                            <description>每秒操作数，该值很重要，查看当前并发压力状态</description>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 is_running</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},is_running]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}=0</expression>
                                    <name>Redis-{#PORT} is down</name>
                                    <priority>HIGH</priority>
                                    <tags>
                                        <tag>
                                            <tag>Redis</tag>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 loading</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},loading]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 master_host</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},master_host]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>CHAR</value_type>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 master_link_status</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},master_link_status]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>CHAR</value_type>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 master_port</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},master_port]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>CHAR</value_type>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 maxmemory</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},maxmemory]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <units>B</units>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 mem_fragmentation_ratio</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},mem_fragmentation_ratio]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <value_type>FLOAT</value_type>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&lt;1</expression>
                                    <name>Redis-{#PORT} is use Swap</name>
                                    <priority>AVERAGE</priority>
                                    <tags>
                                        <tag>
                                            <tag>Redis</tag>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 rdb_bgsave_in_progress</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},rdb_bgsave_in_progress]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 rdb_changes_since_last_save</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},rdb_changes_since_last_save]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 rdb_current_bgsave_time_sec</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},rdb_current_bgsave_time_sec]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 rdb_last_bgsave_status</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},rdb_last_bgsave_status]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>CHAR</value_type>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 rdb_last_bgsave_time_sec</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},rdb_last_bgsave_time_sec]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 rdb_last_cow_size</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},rdb_last_cow_size]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 rdb_last_save_time</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},rdb_last_save_time]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{now()} - {last()} &gt; 300</expression>
                                    <name>Redis-{#PORT} saved 5min ago</name>
                                    <status>DISABLED</status>
                                    <priority>WARNING</priority>
                                    <tags>
                                        <tag>
                                            <tag>Redis</tag>
                                        </tag>
                                    </tags>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 redis_max_conn</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},redis_max_conn]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 rejected_connections</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},rejected_connections]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 role</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},role]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>CHAR</value_type>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 sync_full</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},sync_full]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 sync_partial_ok</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},sync_partial_ok]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 total_commands_processed</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},total_commands_processed]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 total_connections_received</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},total_connections_received]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 total_net_input_bytes</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},total_net_input_bytes]</key>
                            <delay>0</delay>
                            <units>B</units>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 total_net_output_bytes</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},total_net_output_bytes]</key>
                            <delay>0</delay>
                            <units>B</units>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <params/>
                                </step>
                            </preprocessing>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 total_system_memory</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},total_system_memory]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <units>B</units>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 uptime_in_seconds</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},uptime_in_seconds]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 used_memory</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},used_memory]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <units>B</units>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 used_memory_peak</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},used_memory_peak]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <units>B</units>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 used_memory_peak_perc</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},used_memory_peak_perc]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Redis-$1 used_memory_rss</name>
                            <type>TRAP</type>
                            <key>redis[{#PORT},used_memory_rss]</key>
                            <delay>0</delay>
                            <trends>90d</trends>
                            <units>B</units>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                        <item_prototype>
                            <name>Request Data Redis-$2</name>
                            <key>request.redis[{#SERVICE},{#PORT},{$REDIS_PWD}]</key>
                            <delay>30s</delay>
                            <trends>90d</trends>
                            <applications>
                                <application>
                                    <name>Redis</name>
                                </application>
                            </applications>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <expression>{Redis Server Status:redis[{#PORT},connected_clients].last()} / {Redis Server Status:redis[{#PORT},redis_max_conn].last()} &gt; 0.9</expression>
                            <name>Redis-{#PORT} connected_clients/redis_max_conn &gt;90%</name>
                            <priority>HIGH</priority>
                            <tags>
                                <tag>
                                    <tag>Redis</tag>
                                </tag>
                            </tags>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>{Redis Server Status:redis[{#PORT},used_memory].last()} / {Redis Server Status:redis[{#PORT},total_system_memory].last()} &gt;0.4</expression>
                            <name>Redis-{#PORT} use system mem &gt;40%</name>
                            <priority>HIGH</priority>
                            <tags>
                                <tag>
                                    <tag>Redis</tag>
                                </tag>
                            </tags>
                        </trigger_prototype>
                    </trigger_prototypes>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$REDIS_PWD}</macro>
                    <value>you_redis_password</value>
                </macro>
            </macros>
        </template>
    </templates>
</zabbix_export>
